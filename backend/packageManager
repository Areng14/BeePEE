const { dialog, ipcMain } = require("electron")
const { removeAllItems, items } = require("./models/items")

var currentPackage

const unloadPackage = async (remove = false) => {
    //Unload it
    removeAllItems()

    //If remove is true we also unload it from packages

}

const loadPackage = async (pathToPackage) => {
    
}

const reg_loadPackagePopup = () => {
    ipcMain.handle("dialog:loadPackage", async () => {
        const result = await dialog.showOpenDialog({
            properties: ["openFile"],
        })

        if (result.canceled) return null

        //Load the package
        await loadPackage(result.filePaths[0])
        return items
    })
}

module.exports = { reg_loadPackagePopup, loadPackage }
